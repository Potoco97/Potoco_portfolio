var AFAD_fpcCookie=(function(){var A=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var N=function(r,i){for(var t in i)A(r,t,{get:i[t],enumerable:!0})},G=function(r,i,t,e){if(i&&typeof i=="object"||typeof i=="function")for(var n=U(i),o=0,a=n.length,s;o<a;o++)s=n[o],!E.call(r,s)&&s!==t&&A(r,s,{get:function(c){return i[c]}.bind(null,s),enumerable:!(e=O(i,s))||e.enumerable});return r};var M=function(r){return G(A({},"__esModule",{value:!0}),r)};var Q={};N(Q,{fpcCookie:function(){return L}});function l(r,i){if(!(r instanceof i))throw new TypeError("Cannot call a class as a function")}function d(r){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},d(r)}function S(r,i){if(d(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var e=t.call(r,i||"default");if(d(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}function k(r){var i=S(r,"string");return d(i)=="symbol"?i:i+""}function _(r,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,k(e.key),e)}}function m(r,i,t){return i&&_(r.prototype,i),t&&_(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var F=function(){function r(){l(this,r)}return m(r,[{key:"getItem",value:function(t){return!t||!this.hasItem(t)?null:unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))}},{key:"setItem",value:function(t,e,n,o,a,s){if(!(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))){var c="";if(n)switch(n.constructor){case Number:c=n===1/0?"; expires=Tue, 19 Jan 2038 03:14:07 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toGMTString();break}document.cookie=escape(t)+"="+escape(e)+c+(a?"; domain="+a:"")+(o?"; path="+o:"")+(s?"; secure":"")}}},{key:"removeItem",value:function(t,e){!t||!this.hasItem(t)||(document.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(e?"; path="+e:""))}},{key:"hasItem",value:function(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},{key:"keys",value:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<t.length;e++)t[e]=unescape(t[e]);return t}}])}();var R=function(){function r(){l(this,r)}return m(r,[{key:"getItem",value:function(t){if(!t||!localStorage.getItem(t))return null;var e=localStorage.getItem(t);return unescape(e.replace(new RegExp("(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"))}},{key:"setItem",value:function(t,e,n){!t||!n||(localStorage.setItem(t,e),localStorage.setItem(t+"_expires",n))}},{key:"removeItem",value:function(t){t&&localStorage.removeItem(t)}},{key:"hasItem",value:function(t){if(t)return!!localStorage.getItem(t)}},{key:"removeCheck",value:function(t){if(t){var e=localStorage.getItem(t+"_expires");if(e){var n=new Date(e),o=new Date(Date.now());n<o&&(this.removeItem(t),this.removeItem(t+"_expires"))}}}}])}();function P(r){var i=new RegExp(/^((.*?:\/\/)([^\/:]*)(:([0-9]+))?([^\?]*)(\?([^#]*))?(.*)?)$/),t=r.src.match(i);return t[3]}function q(r){for(var i="",t="s",e=location.hostname.split(".").reverse(),n=e.length,o=0;o<n;o++){var a=e.slice(0,o+1).reverse().join(".");r.setItem(t,"s",null,"/",a),r.hasItem(t)&&(i=a);var s=new Date(Date.now()-3600),c=s.toGMTString();if(r.setItem(t,null,c,"/",a),i)break}return i}function w(r,i,t){var e=!1,n=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=r,o.defer=!0,o.async=!1,n.appendChild(o),o.onload=o.onreadystatechange=function(){!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(e=!0,t(i),o.onload=o.onreadystatechange=null)}}function $(r,i){var t=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=B(r))||i&&r&&typeof r.length=="number"){t&&(r=t);var e=0,n=function(){};return{s:n,n:function(){return e>=r.length?{done:!0}:{done:!1,value:r[e++]}},e:function(u){throw u},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){s=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(s)throw o}}}}function B(r,i){if(r){if(typeof r=="string")return D(r,i);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?D(r,i):void 0}}function D(r,i){(i==null||i>r.length)&&(i=r.length);for(var t=0,e=Array(i);t<i;t++)e[t]=r[t];return e}var H="7e175Gb3e8d79e20",L=function(){function r(i){l(this,r),this.currentScript=i,this.paramName="fpc",this.regExp=this.paramName+"=([^?&]*)",this.cookie=new F,this.local_Storage=new R,this.domain=P(this.currentScript),this.origin=q(this.cookie),this.fpcAction=null,this.fpcActionOption={},this.error=null,this.triggerParam=!1,this.isNoParameter=!1,this.prefixSessionId={content:"CTC",group:"CTG"},this.prefixReflow={content:"RCTC",group:"RCTG"},this.paramArray=null,this.paramSpliter=".",this.uniqueId=H,this.contentId=typeof cid!="undefined"?cid:0,this.groupId=typeof gid!="undefined"?gid:0,this.lineApiId=typeof lineApiId!="undefined"?lineApiId:0,this.liffId=typeof liffId!="undefined"?liffId:"",this.actionDomain=typeof actionDomain!="undefined"?actionDomain:"",this.overwriteFromDatasetId(),this.contentIdFormat="_"+this.uniqueId+"-"+this.contentId,this.groupIdFormat="_"+this.uniqueId+"-"+this.groupId,this.isSetItpParam=""}return m(r,[{key:"setFpcAction",value:function(t,e){t&&typeof t.action=="function"&&(this.fpcAction=t,this.fpcActionOption=e)}},{key:"saveFpcCookie",value:function(){var t=new XMLHttpRequest,e=this,n=0,o=1,a=2;t.onload=function(f){if(this.status!==404){var h=JSON.parse(t.responseText);if(typeof h.isSetItpParam!="undefined"&&(e.isSetItpParam=h.isSetItpParam,e.isSetItpParam==o||e.isSetItpParam==a)){var I=Date.now()+864e5*e.paramArray[2],p=new Date(I);typeof e.paramArray[4]!="undefined"?p=new Date(parseInt(e.paramArray[4])):e.paramArray[4]=I;var C=p.toGMTString(),v="_"+e.uniqueId+"-"+e.paramArray[0];if(e.cookie.setItem(e.prefixSessionId.content+v,e.paramArray[3],p,"/",e.origin),e.local_Storage.setItem(e.prefixSessionId.content+v,e.paramArray[3],p),e.setSessionForcloud("content",e.paramArray[0],p),e.cookie.setItem(e.prefixReflow.content+v,e.paramArray.join(e.paramSpliter),p,"/",e.origin),e.local_Storage.setItem(e.prefixReflow.content+v,e.paramArray.join(e.paramSpliter),p),e.paramArray[1]!=0){var y="_"+e.uniqueId+"-"+e.paramArray[1];e.cookie.setItem(e.prefixSessionId.group+y,e.paramArray[3],p,"/",e.origin),e.local_Storage.setItem(e.prefixSessionId.group+y,e.paramArray[3],p),e.cookie.setItem(e.prefixReflow.group+y,e.paramArray.join(e.paramSpliter),p,"/",e.origin),e.local_Storage.setItem(e.prefixReflow.group+y,e.paramArray.join(e.paramSpliter),p),e.setSessionForcloud("group",e.paramArray[1],p)}if(w("//"+e.domain+"/fpc/param.min.js",e.paramArray,function(b){var x=new fpcParam(b);x.addParameterApi(1,e.uniqueId),x.addParameter(e.isSetItpParam,e.uniqueId)}),e.lineApiId>0&&typeof g=="function"){var T=new g(e.domain,e.uniqueId,e.paramArray[3],e.lineApiId,e.liffId,e.actionDomain);T.lineFriendsLogin()}}}},t.onerror=function(f){};try{var s=this.getFpcParameter();if(!s){this.paramName="cats_sid",this.regExp=this.paramName+"=([^?&]*)";var s=this.getFpcParameter()}if(!this.paramArray){var c="",u=this.checkReflowCookieForcloud();this.local_Storage.removeCheck(this.prefixReflow.content+this.contentIdFormat),this.local_Storage.removeCheck(this.prefixReflow.group+this.groupIdFormat),this.cookie.hasItem(this.prefixReflow.content+this.contentIdFormat)?c=this.cookie.getItem(this.prefixReflow.content+this.contentIdFormat):this.cookie.hasItem(this.prefixReflow.group+this.groupIdFormat)?c=this.cookie.getItem(this.prefixReflow.group+this.groupIdFormat):this.local_Storage.hasItem(this.prefixReflow.content+this.contentIdFormat)?c=this.local_Storage.getItem(this.prefixReflow.content+this.contentIdFormat):this.local_Storage.hasItem(this.prefixReflow.group+this.groupIdFormat)?c=this.local_Storage.getItem(this.prefixReflow.group+this.groupIdFormat):u!=!1?(c=u,this.useFcCookie=!0):(this.isNoParameter=!0,this.exit("not parameter")),this.paramArray=c.split(this.paramSpliter)}(e.uniqueId==0||typeof e.paramArray[0]=="undefined")&&this.exit("not paramater"),e.contentId!=0&&e.paramArray[0]!=e.contentId&&this.exit("non target cid"),e.groupId!=0&&e.paramArray[1]!=e.groupId&&this.exit("non target gid"),n=e.paramArray[0],t.open("POST","//"+e.domain+"/fpc/getIsSetItpParam.php",!0),e.fpcAction&&t.addEventListener("load",function(){switch(e.fpcActionOption.method){case"action":e.fpcAction.action(e.fpcActionOption.cid,e.fpcActionOption.af,e.fpcActionOption.uid,e.fpcActionOption.pid,e.fpcActionOption.amount,e.fpcActionOption.uqid);break;case"groupAction":e.fpcAction.groupAction(e.fpcActionOption.gid,e.fpcActionOption.af,e.fpcActionOption.uid,e.fpcActionOption.pid,e.fpcActionOption.amount,e.fpcActionOption.uqid);break;default:throw new Error("no match action method")}}),t.withCredentials=!0,t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("cid=".concat(n,"&uniqueId=").concat(e.uniqueId)),this.triggerParam=!0}catch(f){this.error=f}finally{this.triggerParam===!1&&(w("//"+e.domain+"/fpc/param.min.js",[],function(){var f=new fpcParam([]);f.addParameterApi(1,e.uniqueId)}),this.isNoParameter&&this.redirectorCookieChangeLineButton(e))}}},{key:"redirectorCookieChangeLineButton",value:function(t){if(t.lineApiId!=0&&typeof g=="function"){if(t.contentId>0){var e=this.cookie.getItem(this.prefixSessionId.content+t.contentIdFormat);if(e){var n=new g(t.domain,t.uniqueId,e,t.lineApiId,t.liffId,t.actionDomain);n.lineFriendsLogin();return}}if(t.groupId>0){var o=this.cookie.getItem(this.prefixSessionId.group+t.groupIdFormat);if(o){var a=new g(t.domain,t.uniqueId,o,t.lineApiId,t.liffId,t.actionDomain);a.lineFriendsLogin()}}}}},{key:"overwriteFromDatasetId",value:function(){this.currentScript&&(this.currentScript.dataset.uqid&&(this.uniqueId=this.currentScript.dataset.uqid,this.contentId=0,this.groupId=0),this.currentScript.dataset.cid&&(this.contentId=this.currentScript.dataset.cid),this.currentScript.dataset.gid&&(this.groupId=this.currentScript.dataset.gid),this.currentScript.dataset.lineApiId&&(this.lineApiId=this.currentScript.dataset.lineApiId),this.currentScript.dataset.liffId&&(this.liffId=this.currentScript.dataset.liffId),this.currentScript.dataset.actionDomain&&(this.actionDomain=this.currentScript.dataset.actionDomain))}},{key:"exit",value:function(t){throw new Error(t)}},{key:"getFpcParameter",value:function(){var t=new RegExp(this.regExp),e=location.search.match(t);return e&&(e=decodeURIComponent(e[1]),this.paramArray=e.split(this.paramSpliter),this.contentId!=0&&this.paramArray[0]!=this.contentId&&this.exit("non target cid"),this.groupId!=0&&this.paramArray[1]!=this.groupId&&this.exit("non target gid")),e}},{key:"checkReflowCookieForcloud",value:function(){var t={content:"CCATS",group:"GCATS"},e={content:"P_CCATS",group:"P_GCATS"},n={content:this.contentId,group:this.groupId},o="",a="",s=!1;if(this.cookie.hasItem(e.content+n.content)?a="content":this.cookie.hasItem(e.group+n.group)&&(a="group"),a){s=this.cookie.getItem(e[a]+n[a]),o=this.cookie.getItem(t[a]+n[a]);var c=s.split("."),u=new Date(Date.now()+60*60*24*1e3*c[2]);c[3]=o;var f=c.join(".");this.cookie.setItem(e[a]+n[a],f,u,"/",this.origin),s=f}return s}},{key:"setSessionForcloud",value:function(t,e,n){var o={content:"CCATS",group:"GCATS"},a={content:"P_CCATS",group:"P_GCATS"},s={content:e,group:e};this.cookie.setItem(o[t]+s[t],this.paramArray[3],n,"/",this.origin),this.cookie.setItem(a[t]+s[t],this.paramArray.join(this.paramSpliter),n,"/",this.origin)}}])}(),g=function(){function r(i,t,e,n,o,a){l(this,r),this.domain=i,this.uniqueId=t,this.sessionId=e,this.lineApiId=n,this.liffId=o,this.actionDomain=a}return m(r,[{key:"validateLineAction",value:function(){var t=document.querySelectorAll('[data-afad="lineFriendsFollowLink"]');return!(t.length===0||!this.domain||!this.uniqueId||!this.sessionId||!this.lineApiId)}},{key:"changeLinkLineFriendsLoginUrl",value:function(t,e){if(this.validateLineAction(),!(t===""||e==="")){var n=encodeURIComponent("https://"+this.domain+"/line/callback.php?lineApiId="+this.lineApiId+"&sessionId="+this.sessionId+"&uniqueId="+this.uniqueId+"&currentUrl="+encodeURIComponent(location.href)),o=t+"&state="+this.sessionId+"&client_id="+e+"&redirect_uri="+n,a="",s=!1;if(this.liffId!="")if(/iPhone|iPad|iPod/i.test(navigator.userAgent))o="line://app/"+this.liffId+"?lineApiId="+this.lineApiId+"&afadDomain="+this.actionDomain+"&sessionId="+this.sessionId+"&uniqueId="+this.uniqueId+"&liff_id="+this.liffId+"&currentUrl="+encodeURIComponent(location.href),s=!0;else if(/Android/i.test(navigator.userAgent))o="intent://liff.line.me/"+this.liffId+"?lineApiId="+this.lineApiId+"&afadDomain="+this.actionDomain+"&sessionId="+this.sessionId+"&uniqueId="+this.uniqueId+"&liff_id="+this.liffId+"&currentUrl="+encodeURIComponent(location.href),a="#Intent;scheme=https;action=android.intent.action.VIEW;category=android.intent.category.BROWSABLE;package=jp.naver.line.android;end",s=!0;else{var c="https://line.me/R/app/"+this.liffId+"?lineApiId="+this.lineApiId+"&afadDomain="+this.actionDomain+"&sessionId="+this.sessionId+"&uniqueId="+this.uniqueId+"&liff_id="+this.liffId;o="https://"+this.actionDomain+"/line/qr.html?afadQrUrl="+encodeURIComponent(c)+"&currentUrl="+encodeURIComponent(location.href),s=!0}var u="",f=document.querySelectorAll('[data-afad="lineFriendsFollowLink"]'),h=$(f),I;try{for(h.s();!(I=h.n()).done;){var p=I.value;u=p.getAttribute("href"),s?p.setAttribute("href",o+"&loginUrl="+encodeURIComponent(u)+a):p.setAttribute("href",o+encodeURIComponent("&loginUrl="+encodeURIComponent(u))),p.setAttribute("data-afad","lineFriendsFollowLinkDone")}}catch(C){h.e(C)}finally{h.f()}}}},{key:"createQueryString",value:function(t){var e=[];return Object.keys(t).forEach(function(n){t[n]!=""&&e.push(n+"="+t[n])}),e.join("&")}},{key:"lineFriendsLogin",value:function(){if(this.validateLineAction()!==!1){var t=new XMLHttpRequest,e=this;t.onload=function(a){var s=JSON.parse(t.responseText);s.actionResult&&e.changeLinkLineFriendsLoginUrl(s.loginAuthUrl,s.loginChannelId)},t.onerror=function(a){};var n={uniqueId:this.uniqueId,lineApiId:this.lineApiId},o=this.createQueryString(n);t.open("POST","//"+this.domain+"/line/login.php",!0),t.withCredentials=!0,t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(o)}}}])}();new L(document.currentScript).saveFpcCookie();return M(Q);})();
window.fpcCookie = AFAD_fpcCookie.fpcCookie;
